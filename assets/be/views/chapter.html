<div class="pu-chapter">
  <h2>
    <div class='btn btn-default back-button' ng-click='back()'><span class='glyphicon glyphicon-chevron-left'></span>{{'UI.BACK'| translate}}</div>
  </h2>
  <div class="well well-lg" ng-bind="'CHAPTER.INFO' | translate"></div>
  <div class="row video-viewer">
    <div class='col-sm-8 col-sm-push-4'>
       <ov-player
         ov-player-type="{{playerType}}"
         ov-data="videoPlayer"
         ov-language="playerLanguage"
         id="chapterPlayer"
         ></ov-player>
    </div>
    <div class='col-sm-4 col-sm-pull-8'>
      <table class="table table-striped table-condensed chapter-table">
        <thead>
          <tr><th class='col-sm-3 active'>{{ 'CHAPTER.HEAD_TIME' | translate}}</th>
            <th class='col-sm-9 active'>{{ 'CHAPTER.HEAD_TITLE' | translate}}</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="row in ranges| orderBy:'+value'" ng-click="select(row)" ng-class="{'selected':row.select}" class="{{row.type?row.type:''}}">
            <td class="col-sm-3">{{ duration?((row.value*duration)*1000 | date:'H:mm:ss':'+0000'):'-:--:--' }}</td>
            <td class="col-sm-9" ng-bind=" row.name | translate"></td>
          </tr>
        </tbody>
      </table>
      <div class="btn-group btn-group-justified" role="group">
        <div class="btn-group" role="group">
          <button type="button" class="btn btn-default" ng-click="openNew()">{{ 'UI.FORM_NEW' | translate}}</button>
        </div>
        <div class="btn-group" role="group">
          <button type="button" class="btn btn-default" ng-disabled="!selectRow" ng-click="openEdit()">{{ 'UI.FORM_EDIT' | translate}}</button>
        </div>
        <div class="btn-group" role="group">
          <button type="button" class="btn btn-default" ng-disabled="!selectRow || !isCollapsed || (selectRow && selectRow.type)" ng-click="remove()">{{ 'UI.REMOVE' | translate}}</button>
        </div>
      </div>
    </div>

  </div>

  <div class="editform" uib-collapse="isCollapsed">
    <div class='well container-fluid'>
      <form name="myForm">
      <div class="col-sm-4">
        <div class="form-group">
          <label for="time">{{ 'CHAPTER.FORM_TIME' | translate}}</label>
          <input type="time" step="1" name="time" class="form-control" id="time" ng-model="editTime" ng-change="updateRange()" min="00:00:00" max="{{ duration*1000 | date:'HH:mm:ss':'+0000'}}" placeholder="00:00:00">
        </div>
        <div class="form-group">
          <label for="title">{{ 'CHAPTER.FORM_TITLE' | translate}}*</label>
          <input type="text" class="form-control" name="title" id="title" ng-model="modelToEdit.name" ng-disabled="modelToEdit.type" required>
        </div>
      </div>
      <div class="col-sm-5" >
        <div class="form-group"  ng-if="!modelToEdit.type">
          <label for="title">{{ 'CHAPTER.FORM_DESCRIPTION' | translate}}</label>
          <textarea class="form-control" rows="5" ng-model="modelToEdit.description"></textarea>
        </div>
      </div>
      <div class="col-sm-3 button">
        <button type="submit" ng-disabled="!myForm.time.$valid || !myForm.title.$valid || !editTime " class="btn btn-primary" ng-click="submit()" ng-bind="selectRow?'UI.FORM_SAVE':'UI.FORM_ADD' | translate"></button>
        <button type="button" class="btn btn-default" ng-click="cancel()" ng-bind="'UI.FORM_CANCEL' | translate"></button>
      </div>
      </form>
    </div>
  </div>

   <div class="multirange-container" ng-swipe-disable-mouse>
     <div class="pull-left" style="margin-bottom: 5px">
       <button uib-popover="{{!beginCut.isInArray?'CHAPTER.ADD_BEGIN':'CHAPTER.REMOVE_BEGIN' | translate | noBreakSpace }}" popover-trigger="mouseenter" class="btn btn-default" ng-model="beginCut.isInArray" uib-btn-checkbox>
         <i class="glyphicon glyphicon-log-out"></i>
       </button>
       <button uib-popover="{{!endCut.isInArray?'CHAPTER.ADD_END':'CHAPTER.REMOVE_END' | translate | noBreakSpace }}" popover-trigger="mouseenter" class="btn btn-default" ng-model="endCut.isInArray" uib-btn-checkbox>
         <i class="glyphicon glyphicon-log-in"></i>
       </button>
     </div>
     <div class="pull-right" style="margin-bottom: 5px">
       <span class="ng-binding">Zoom x<span ng-bind="slider.view+1"></span></span>
       <button class="btn btn-default" ng-disabled="slider.view == slider.views.length-1" ng-click="changeSliderView($event, 1)">
         <i class="glyphicon glyphicon-zoom-in"></i>
       </button>
       <button class="btn btn-default" ng-disabled="slider.view == 0" ng-click="changeSliderView($event, -1)">
         <i class="glyphicon glyphicon-zoom-out"></i> </button>
     </div>
     <ov-multirange class="row" ng-model="ranges" on-select="select" on-mouserelease="releaseRange" on-enableMouseOver="isCollapsed" views="slider.views" view="slider.view"></ov-multirange>
   </div>
</div>